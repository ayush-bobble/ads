pipeline {
    agent any

    environment {
        CHROMEDRIVER_VERSION = '94.0.4606.61'  // Update with the desired version
        CHROMEDRIVER_PATH = "/usr/local/bin/chromedriver"
    }

    stages {
        stage('Install Dependencies') {
            steps {
                script {
                    sh 'pip3 install pandas3'
                }
            }
        }

       stage('Download and Install Chromedriver') {
    steps {
        script {
            // Download and install chromedriver
            sh """
                wget -q https://chromedriver.storage.googleapis.com/94.0.4606.61/chromedriver_linux64.zip
                unzip -o chromedriver_linux64.zip -d ${WORKSPACE}/chromedriver
                chmod +x ${WORKSPACE}/chromedriver/chromedriver
                export PATH=\${WORKSPACE}/chromedriver:\${PATH}
            """
        }
    }
}

        stage('Run Tests') {
            steps {
                script {
                    // Add chromedriver to PATH
                    env.PATH = "${CHROMEDRIVER_PATH}:${env.PATH}"

                    // Run your tests
                    sh 'python3 testAll.py'
                }
            }
        }
    }
}
